<!-- Modal Overlay -->
<div 
  class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
  (click)="onOverlayClick($event)"
  role="dialog"
  aria-labelledby="admin-login-title"
  aria-modal="true"
>
  <!-- Modal Content -->
  <div 
    class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"
    (click)="$event.stopPropagation()"
  >
    <!-- Header -->
    <div class="flex items-center justify-between p-6 border-b border-gray-200">
      <h2 id="admin-login-title" class="text-xl font-semibold text-gray-900">
        Admin Login
      </h2>
      <button 
        type="button"
        (click)="onCancel()"
        class="text-gray-400 hover:text-gray-600 transition-colors"
        aria-label="Close login modal"
      >
        <lucide-icon name="x" size="20"></lucide-icon>
      </button>
    </div>

    <!-- Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="p-6">
      <div class="space-y-4">
        <!-- Username Field -->
        <div>
          <label 
            for="username" 
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Username
          </label>
          <input 
            id="username"
            type="text" 
            formControlName="username"
            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
            [class.border-red-500]="isFieldInvalid('username')"
            placeholder="Enter your username"
            autocomplete="username"
          />
          @if (isFieldInvalid('username')) {
            <p class="mt-1 text-sm text-red-600">
              Username is required
            </p>
          }
        </div>

        <!-- Password Field -->
        <div>
          <label 
            for="password" 
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Password
          </label>
          <div class="relative">
            <input 
              id="password"
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
              [class.border-red-500]="isFieldInvalid('password')"
              placeholder="Enter your password"
              autocomplete="current-password"
            />
            <button
              type="button"
              (click)="togglePasswordVisibility()"
              class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"
              aria-label="Toggle password visibility"
            >
              <lucide-icon 
                [name]="showPassword() ? 'eye-off' : 'eye'" 
                size="16"
              ></lucide-icon>
            </button>
          </div>
          @if (isFieldInvalid('password')) {
            <p class="mt-1 text-sm text-red-600">
              Password is required
            </p>
          }
        </div>

        <!-- Error Message -->
        @if (errorMessage()) {
          <div class="p-3 bg-red-50 border border-red-200 rounded-md">
            <div class="flex items-center">
              <lucide-icon name="alert-circle" size="16" class="text-red-500 mr-2"></lucide-icon>
              <p class="text-sm text-red-700">{{ errorMessage() }}</p>
            </div>
          </div>
        }

        <!-- Loading State -->
        @if (isLoading()) {
          <div class="p-3 bg-blue-50 border border-blue-200 rounded-md">
            <div class="flex items-center">
              <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></div>
              <p class="text-sm text-blue-700">Logging in...</p>
            </div>
          </div>
        }
      </div>

      <!-- Actions -->
      <div class="flex gap-3 mt-6">
        <app-button 
          type="submit" 
          variant="default"
          [disabled]="loginForm.invalid || isLoading()"
          class="flex-1"
        >
          @if (isLoading()) {
            <div class="flex items-center justify-center">
              <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
              Logging in...
            </div>
          } @else {
            Login
          }
        </app-button>
        
        <app-button 
          type="button" 
          variant="outline"
          (click)="onCancel()"
          [disabled]="isLoading()"
          class="flex-1"
        >
          Cancel
        </app-button>
      </div>
    </form>

    <!-- Footer -->
    <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg">
      <p class="text-xs text-gray-500 text-center">
        Admin access required to manage CV content
      </p>
    </div>
  </div>
</div>