<!-- CV Application Main Template -->
<main 
  class="container relative mx-auto scroll-my-12 overflow-auto px-4 py-6 sm:px-6 sm:py-8 md:px-8 md:py-12 lg:px-16 lg:py-16 print:p-11"
  id="cv-content"
  role="main"
  [attr.aria-label]="resumeData().name + ' Resume'"
  style="background-color: hsl(45 15% 96%) !important; color: hsl(0 0% 15%) !important;"
>
  <!-- Screen reader only title -->
  <div class="sr-only">
    <h1>{{ resumeData().name }}'s Resume</h1>
  </div>

  <!-- Error State -->
  @if (errorState()) {
    <div class="flex flex-col items-center justify-center min-h-[400px] space-y-4">
      <div class="text-center">
        <h2 class="text-xl font-semibold text-destructive mb-2">
          Something went wrong
        </h2>
        <p class="text-muted-foreground mb-4">
          {{ errorState() }}
        </p>
        <button 
          class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90"
          (click)="retry()"
        >
          Try Again
        </button>
      </div>
    </div>
  } @else {
    <!-- Main CV Content -->
    <section
      class="mx-auto w-full max-w-3xl space-y-6 sm:space-y-8 print:space-y-4"
      aria-label="Resume Content"
      style="background-color: transparent !important; color: hsl(0 0% 15%) !important;"
    >
      <!-- Header Section -->
      <div class="space-y-4">
        @if (isLoading()) {
          <app-skeleton [lines]="4" height="1.5rem"></app-skeleton>
        } @else {
          <app-header />
        }
      </div>

      <!-- Content Sections -->
      <div class="space-y-6 sm:space-y-8 print:space-y-4">
        <!-- Summary Section -->
        <div>
          @if (isLoading()) {
            <app-skeleton [lines]="2" height="1rem"></app-skeleton>
          } @else {
            <app-summary />
          }
        </div>

        <!-- Work Experience Section -->
        <div>
          @if (isLoading()) {
            <app-skeleton [lines]="6" height="1rem"></app-skeleton>
          } @else {
            <app-work-experience />
          }
        </div>

        <!-- Education Section -->
        <div>
          @if (isLoading()) {
            <app-skeleton [lines]="3" height="1rem"></app-skeleton>
          } @else {
            <app-education />
          }
        </div>

        <!-- Skills Section -->
        <div>
          @if (isLoading()) {
            <app-skeleton [lines]="2" height="1rem"></app-skeleton>
          } @else {
            <app-skills />
          }
        </div>

        <!-- Projects Section -->
        <div>
          @if (isLoading()) {
            <app-skeleton [lines]="5" height="1rem"></app-skeleton>
          } @else {
            <app-projects />
          }
        </div>
      </div>
    </section>

    <!-- Command Menu -->
    <app-command-menu />
  }

  <!-- Admin Modals -->
  @if (showAdminLogin()) {
    <app-admin-login />
  }
  
  @if (showAdminPanel()) {
    <app-admin-panel />
  }
</main>


