<div class="space-y-6">
  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
      <div class="flex">
        <svg class="w-5 h-5 text-red-400 mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div>
          <h4 class="text-sm font-medium text-red-800">Error</h4>
          <p class="text-sm text-red-700 mt-1">{{ errorMessage() }}</p>
        </div>
      </div>
    </div>
  }

  <!-- Success Message -->
  @if (successMessage()) {
    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
      <div class="flex">
        <svg class="w-5 h-5 text-green-400 mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <div>
          <h4 class="text-sm font-medium text-green-800">Success</h4>
          <p class="text-sm text-green-700 mt-1">{{ successMessage() }}</p>
        </div>
      </div>
    </div>
  }

  <!-- Export Section -->
  <div class="bg-white border border-gray-200 rounded-lg p-6">
    <h4 class="text-md font-medium text-gray-900 mb-4">üì§ Export Data</h4>
    <p class="text-sm text-gray-500 mb-4">
      Download your complete CV data as a JSON file. This file can be used as a backup or for importing data later.
    </p>
    
    <button
      type="button"
      (click)="exportData()"
      [disabled]="isExporting()"
      class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      @if (isExporting()) {
        <svg class="animate-spin w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Exporting...
      } @else {
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        Export CV Data
      }
    </button>
  </div>

  <!-- Import Section -->
  <div class="bg-white border border-gray-200 rounded-lg p-6">
    <h4 class="text-md font-medium text-gray-900 mb-4">üì• Import Data</h4>
    <p class="text-sm text-gray-500 mb-4">
      Import CV data from a previously exported JSON file. This will replace all current data.
    </p>

    <form [formGroup]="importForm" (ngSubmit)="importData()" class="space-y-4">
      <!-- File Upload -->
      <div>
        <label for="importFile" class="block text-sm font-medium text-gray-700 mb-1">
          Select JSON File
        </label>
        <input
          type="file"
          id="importFile"
          accept=".json,application/json"
          (change)="onFileSelected($event)"
          class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
        />
      </div>

      <!-- JSON Text Area (Alternative) -->
      <div>
        <label for="importData" class="block text-sm font-medium text-gray-700 mb-1">
          Or Paste JSON Data
        </label>
        <textarea
          id="importData"
          formControlName="importData"
          rows="6"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="Paste your exported JSON data here..."
        ></textarea>
      </div>

      <button
        type="submit"
        [disabled]="!canImport() || isImporting()"
        class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        @if (isImporting()) {
          <svg class="animate-spin w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Importing...
        } @else {
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M13 13l3-3m0 0l-3-3m3 3H8"></path>
          </svg>
          Import Data
        }
      </button>
    </form>
  </div>

  <!-- Information -->
  <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
    <h5 class="text-sm font-medium text-yellow-900 mb-2">‚ö†Ô∏è Important Information</h5>
    <div class="text-xs text-yellow-800 space-y-1">
      <p><strong>Export:</strong> Creates a complete backup of all your CV data including personal info, work experience, education, skills, projects, and social links.</p>
      <p><strong>Import:</strong> Replaces ALL current data with the imported data. Make sure to export current data first if you want to keep it.</p>
      <p><strong>Format:</strong> Only valid JSON files from this application are supported.</p>
      <p><strong>Security:</strong> Backup files contain all your personal information. Store them securely.</p>
    </div>
  </div>

  <!-- Close Button -->
  <div class="flex justify-end pt-4 border-t border-gray-200">
    <button
      type="button"
      (click)="closePanel()"
      class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
    >
      Close
    </button>
  </div>
</div>